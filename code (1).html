<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Íµ¨Íµ¨Îã® Ïó∞Ïäµ ÌîÑÎ°úÍ∑∏Îû® (Îã® ÏÑ†ÌÉù)</title>
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        background-color: #f0f2f5;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .container {
        background-color: #fff;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        text-align: center;
        width: 380px;
    }
    h1 {
        color: #333;
        margin-top: 0;
        margin-bottom: 20px;
        font-size: 28px;
    }
    .dan-selector {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 12px;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
    }
    .dan-selector label {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 16px;
        cursor: pointer;
        padding: 5px;
        border-radius: 6px;
        transition: background-color 0.2s;
    }
    .dan-selector label:hover {
        background-color: #f0f2f5;
    }
    .problem {
        font-size: 48px;
        font-weight: bold;
        color: #007bff;
        margin-bottom: 30px;
        min-height: 60px; /* Í≥µÍ∞Ñ ÌôïÎ≥¥ */
    }
    .input-group {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
    }
    input[type="number"] {
        width: 100px;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 24px;
        text-align: center;
        margin-right: 10px;
        -moz-appearance: textfield; /* Firefox */
    }
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    input:disabled {
        background-color: #f8f9fa;
    }
    button {
        padding: 12px 24px;
        font-size: 18px;
        font-weight: bold;
        color: #fff;
        background-color: #007bff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    button:hover {
        background-color: #0056b3;
    }
    button:disabled {
        background-color: #a0cffc;
        cursor: not-allowed;
    }
    .result {
        font-size: 20px;
        font-weight: bold;
        height: 30px;
    }
    .correct {
        color: #28a745;
    }
    .incorrect {
        color: #dc3545;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Íµ¨Íµ¨Îã® Ïó∞Ïäµ</h1>
    <div id="dan-selector" class="dan-selector">
        <!-- Ï≤¥ÌÅ¨Î∞ïÏä§Îäî Ïä§ÌÅ¨Î¶ΩÌä∏Î°ú ÏÉùÏÑ± -->
    </div>
    <div id="problem" class="problem"></div>
    <div class="input-group">
        <input type="number" id="answer" autofocus>
        <button id="submitBtn">ÌôïÏù∏</button>
    </div>
    <div id="result" class="result"></div>
</div>

<script>
    const danSelector = document.getElementById('dan-selector');
    const problemElement = document.getElementById('problem');
    const answerElement = document.getElementById('answer');
    const submitBtn = document.getElementById('submitBtn');
    const resultElement = document.getElementById('result');

    let num1, num2, correctAnswer;

    // 2Îã®Î∂ÄÌÑ∞ 9Îã®ÍπåÏßÄ Ï≤¥ÌÅ¨Î∞ïÏä§ ÏÉùÏÑ±
    for (let i = 2; i <= 9; i++) {
        const label = document.createElement('label');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.className = 'dan-checkbox';
        checkbox.value = i;
        checkbox.checked = true; // Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Î™®Îëê Ï≤¥ÌÅ¨Îêú ÏÉÅÌÉúÎ°ú ÏãúÏûë
        
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(` ${i}Îã®`));
        danSelector.appendChild(label);
    }

    const danCheckboxes = document.querySelectorAll('.dan-checkbox');

    function getSelectedDans() {
        const selected = [];
        danCheckboxes.forEach(checkbox => {
            if (checkbox.checked) {
                selected.push(parseInt(checkbox.value));
            }
        });
        return selected;
    }

    function generateProblem() {
        const selectedDans = getSelectedDans();

        if (selectedDans.length === 0) {
            problemElement.textContent = 'Ïó∞ÏäµÌï† Îã®ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.';
            answerElement.value = '';
            answerElement.disabled = true;
            submitBtn.disabled = true;
            resultElement.textContent = '';
            return;
        }

        answerElement.disabled = false;
        submitBtn.disabled = false;

        num1 = selectedDans[Math.floor(Math.random() * selectedDans.length)];
        num2 = Math.floor(Math.random() * 9) + 1; // 1Î∂ÄÌÑ∞ 9ÍπåÏßÄ
        correctAnswer = num1 * num2;

        problemElement.textContent = `${num1} √ó ${num2} = ?`;
        answerElement.value = '';
        answerElement.focus();
        resultElement.textContent = '';
    }

    function checkAnswer() {
        const userAnswer = parseInt(answerElement.value, 10);

        if (isNaN(userAnswer)) {
            resultElement.textContent = 'Ïà´ÏûêÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.';
            resultElement.className = 'result incorrect';
            return;
        }

        if (userAnswer === correctAnswer) {
            resultElement.textContent = 'Ï†ïÎãµÏûÖÎãàÎã§! üéâ';
            resultElement.className = 'result correct';
            setTimeout(generateProblem, 1500);
        } else {
            resultElement.textContent = 'ÌãÄÎ†∏ÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Î≥¥ÏÑ∏Ïöî. ü§î';
            resultElement.className = 'result incorrect';
            answerElement.value = '';
            answerElement.focus();
        }
    }

    submitBtn.addEventListener('click', checkAnswer);
    answerElement.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
            checkAnswer();
        }
    });

    danCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', generateProblem);
    });

    // Ï¥àÍ∏∞ Î¨∏Ï†ú ÏÉùÏÑ±
    generateProblem();
</script>

</body>
</html>